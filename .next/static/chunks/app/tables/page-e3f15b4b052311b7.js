(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[952],{8924:function(){},5024:function(){},6573:function(t,e,i){Promise.resolve().then(i.bind(i,382))},382:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return x}});var s=i(7437),l=i(2265),a=i(9376);function r(t){let{tableNumber:e,price:i,cycles:a,slots:r,isActive:o,isUnlocked:n,onBuy:c}=t,d=(0,l.useRef)(null),h=(0,l.useRef)(null),u=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!d.current||!u.current)return;let t=()=>{if(!u.current)return{width:495,height:680};let t=u.current.clientWidth;return{width:t,height:680/495*t}},s=()=>{if(!h.current)return;let{width:e,height:i}=t();h.current.resize(e,i)},{width:l,height:p}=t();class f{resize(t,e){this.opts.width=t,this.opts.height=e,this.scale=t/495,this.opts.scale=this.scale,this.canvas.width=Math.floor(t*this.dpr),this.canvas.height=Math.floor(e*this.dpr),this.canvas.style.width="".concat(t,"px"),this.canvas.style.height="".concat(e,"px"),this.ctx.setTransform(this.dpr,0,0,this.dpr,0,0),this.draw(0)}roundRect(t,e,i,s,l,a){let r=Math.min(a,s/2,l/2);t.beginPath(),t.moveTo(e+r,i),t.arcTo(e+s,i,e+s,i+l,r),t.arcTo(e+s,i+l,e,i+l,r),t.arcTo(e,i+l,e,i,r),t.arcTo(e,i,e+s,i,r),t.closePath()}getAnimatedGradient(t,e,i,s,l,a){let r=.001*a%1,o=[{r:59,g:130,b:246},{r:139,g:92,b:246},{r:236,g:72,b:153},{r:59,g:130,b:246}],n=t.createLinearGradient(e,i,e+s,i+l);for(let t=0;t<3;t++){let e=(t/2+r)%1,i=Math.floor(3*e),s=(i+1)%3,l=3*e%1,a=o[i],c=o[s],d=Math.round(a.r+(c.r-a.r)*l),h=Math.round(a.g+(c.g-a.g)*l),u=Math.round(a.b+(c.b-a.b)*l);n.addColorStop(t/2,"rgba(".concat(d,", ").concat(h,", ").concat(u,", 0.9)"))}return n}drawDiamondIcon(t,e,i,s){t.save(),t.translate(e,i),t.strokeStyle=this.opts.isActive?"rgba(160, 235, 255, 0.95)":"rgba(100, 100, 120, 0.5)",t.lineWidth=2*this.scale;let l=.72*s;t.beginPath(),t.moveTo(0,0),t.lineTo(.22*s,-(.35*l)),t.lineTo(.78*s,-(.35*l)),t.lineTo(s,0),t.lineTo(.5*s,l),t.closePath(),t.stroke(),t.beginPath(),t.moveTo(.22*s,-(.35*l)),t.lineTo(.5*s,0),t.lineTo(.78*s,-(.35*l)),t.moveTo(.22*s,-(.35*l)),t.lineTo(.35*s,0),t.lineTo(.5*s,l),t.moveTo(.78*s,-(.35*l)),t.lineTo(.65*s,0),t.lineTo(.5*s,l),t.stroke(),this.opts.isActive&&(t.shadowColor="rgba(120,220,255,0.9)",t.shadowBlur=18*this.scale,t.stroke()),t.restore()}drawPlatforms(t){let e=this.ctx,i=this.opts.width,s=this.opts.height;if(!this.opts.isActive)return;let l=i/2,a=.88*s,r=.72*i,o=.045*s;[{scale:1.08,yOff:18*this.scale,alpha:.25},{scale:1,yOff:9*this.scale,alpha:.35},{scale:.92,yOff:0,alpha:.45}].forEach((i,s)=>{let n=r*i.scale,c=l-n/2,d=a+i.yOff,h=e.createLinearGradient(c,d,c+n,d+o);h.addColorStop(0,"rgba(30, 60, 160, ".concat(i.alpha,")")),h.addColorStop(.5,"rgba(60, 40, 180, ".concat(i.alpha,")")),h.addColorStop(1,"rgba(120, 40, 200, ".concat(i.alpha,")")),e.fillStyle=h,this.roundRect(e,c,d,n,o,12*this.scale),e.fill();let u=.6+.4*Math.sin(.003*t+.8*s);e.strokeStyle=this.getAnimatedGradient(e,c,d,n,o,t),e.globalAlpha=.7*u,e.lineWidth=2*this.scale,this.roundRect(e,c,d,n,o,12*this.scale),e.stroke(),e.globalAlpha=1})}drawCardShell(t){let e=this.ctx,i=this.opts.width,s=this.opts.height,l=Math.round(.08*i),a=Math.round(.06*s),r=i-2*l,o=s-Math.round(.2*s);this.card={x:l,y:a,w:r,h:o},e.clearRect(0,0,i,s),this.drawPlatforms(t),this.opts.isActive&&(e.save(),e.shadowColor="rgba(113, 83, 255, 0.6)",e.shadowBlur=30*this.scale,this.roundRect(e,l,a,r,o,42*this.scale),e.strokeStyle="rgba(130,120,255,0.25)",e.lineWidth=1*this.scale,e.stroke(),e.restore());let n=e.createLinearGradient(l,a,l+r,a+o);if(this.opts.isActive?(n.addColorStop(0,"rgba(7, 18, 70, 0.82)"),n.addColorStop(.55,"rgba(8, 22, 88, 0.78)"),n.addColorStop(1,"rgba(28, 12, 88, 0.78)")):(n.addColorStop(0,"rgba(20, 20, 30, 0.6)"),n.addColorStop(1,"rgba(30, 30, 40, 0.6)")),e.fillStyle=n,this.roundRect(e,l,a,r,o,42*this.scale),e.fill(),this.opts.isActive){let i=.7+.3*Math.sin(.002*t);e.strokeStyle=this.getAnimatedGradient(e,l,a,r,o,t),e.globalAlpha=i,e.lineWidth=3*this.scale,this.roundRect(e,l,a,r,o,42*this.scale),e.stroke(),e.globalAlpha=1,e.shadowColor="rgba(139, 92, 246, 0.8)",e.shadowBlur=40*this.scale,e.lineWidth=2*this.scale,this.roundRect(e,l,a,r,o,42*this.scale),e.stroke(),e.shadowBlur=0}if(this.opts.isActive){let i=a+.7*o;for(let s=0;s<50;s++){let n=l+12*this.scale+37.17*s*this.scale%(r-24*this.scale),c=i+(53.91*s*this.scale+.02*t)%(o-(i-a)-12*this.scale),d=.15+.07*s%.3;e.fillStyle=s%3==0?"rgba(90,220,255,".concat(d,")"):"rgba(200,120,255,".concat(d,")"),e.beginPath(),e.arc(n,c,(s%5*.18+.6)*this.scale,0,2*Math.PI),e.fill()}}}drawHeader(){let t=this.ctx,{x:e,y:i,w:s}=this.card,l=i+45*this.scale;this.drawDiamondIcon(t,e+.09*s,l,40*this.scale),t.font="700 ".concat(38*this.scale,"px Inter, system-ui, Arial, sans-serif"),t.fillStyle=this.opts.isActive?"rgba(240,248,255,0.95)":"rgba(160,160,170,0.7)",t.textBaseline="middle",t.fillText("Table ".concat(this.opts.table),e+.35*s,i+45*this.scale)}drawSlots(){let t=this.ctx,{x:e,y:i,w:s}=this.card,l=i+100*this.scale,a=(s-60*this.scale)/2,r=80*this.scale,o=15*this.scale,n=[{x:e+20*this.scale,y:l},{x:e+20*this.scale+a+o,y:l},{x:e+20*this.scale,y:l+r+12*this.scale},{x:e+20*this.scale+a+o,y:l+r+12*this.scale}];t.font="600 ".concat(18*this.scale,"px Inter, system-ui, Arial, sans-serif"),t.textAlign="center",t.textBaseline="middle",n.forEach((e,i)=>{let s=this.opts.slots[i],l=(null==s?void 0:s.nickname)||(null==s?void 0:s.filled),o=t.createLinearGradient(e.x,e.y,e.x+a,e.y+r);if(l&&this.opts.isActive?(o.addColorStop(0,"rgba(34, 197, 94, 0.35)"),o.addColorStop(1,"rgba(59, 130, 246, 0.35)")):(o.addColorStop(0,"rgba(34, 53, 130, 0.35)"),o.addColorStop(1,"rgba(40, 28, 125, 0.25)")),t.fillStyle=o,this.roundRect(t,e.x,e.y,a,r,16*this.scale),t.fill(),l&&this.opts.isActive){let s=.6+.4*Math.sin(.003*this.time+.5*i);t.strokeStyle=this.getAnimatedGradient(t,e.x,e.y,a,r,this.time+500*i),t.globalAlpha=s,t.lineWidth=2.5*this.scale,this.roundRect(t,e.x,e.y,a,r,16*this.scale),t.stroke(),t.globalAlpha=1,t.shadowColor="rgba(34, 197, 94, 0.6)",t.shadowBlur=15*this.scale,t.lineWidth=1.5*this.scale,this.roundRect(t,e.x,e.y,a,r,16*this.scale),t.stroke(),t.shadowBlur=0}else l&&this.opts.isActive||(t.strokeStyle=this.opts.isActive?"rgba(89,223,255,0.4)":"rgba(60,60,70,0.3)",t.lineWidth=1.5*this.scale,this.roundRect(t,e.x,e.y,a,r,16*this.scale),t.stroke());(null==s?void 0:s.nickname)?(t.fillStyle=this.opts.isActive?"rgba(230,245,255,0.95)":"rgba(160,160,170,0.7)",t.fillText(s.nickname,e.x+a/2,e.y+r/2)):l||(t.fillStyle="rgba(120,120,130,0.5)",t.fillText("Empty",e.x+a/2,e.y+r/2))}),t.textAlign="left"}drawTonBar(){let t=this.ctx,{x:e,y:i,w:s}=this.card,l=e+20*this.scale,a=i+295*this.scale,r=s-40*this.scale,o=70*this.scale,n=t.createLinearGradient(l,a,l+r,a);if(this.opts.isActive?(n.addColorStop(0,"rgba(17,33,125,0.85)"),n.addColorStop(.5,"rgba(18,46,165,0.8)"),n.addColorStop(1,"rgba(97,41,163,0.85)")):(n.addColorStop(0,"rgba(40,40,50,0.6)"),n.addColorStop(1,"rgba(50,50,60,0.6)")),t.fillStyle=n,this.roundRect(t,l,a,r,o,16*this.scale),t.fill(),this.opts.isActive){let e=.7+.3*Math.sin(.0025*this.time);t.strokeStyle=this.getAnimatedGradient(t,l,a,r,o,this.time),t.globalAlpha=e,t.lineWidth=2.5*this.scale,this.roundRect(t,l,a,r,o,16*this.scale),t.stroke(),t.globalAlpha=1}t.font="700 ".concat(42*this.scale,"px Inter, system-ui, Arial, sans-serif"),t.fillStyle=this.opts.isActive?"rgba(235,245,255,0.98)":"rgba(160,160,170,0.7)",t.textAlign="center",t.textBaseline="middle",t.fillText("".concat(this.opts.ton," TON"),l+r/2,a+o/2),t.textAlign="left"}drawCycles(){let t=this.ctx,{x:e,y:i,w:s}=this.card;t.font="500 ".concat(28*this.scale,"px Inter, system-ui, Arial, sans-serif"),t.fillStyle=this.opts.isActive?"rgba(234,244,255,0.95)":"rgba(160,160,170,0.7)",t.textAlign="center",t.textBaseline="middle",t.fillText("Cycles: ".concat(this.opts.cyclesClosed),e+s/2,i+295*this.scale+70*this.scale+20*this.scale),t.textAlign="left"}drawStatusBar(){let t=this.ctx,{x:e,y:i,w:s,h:l}=this.card;this.opts.height;let a=i+l-50*this.scale,r=40*this.scale,o=e+20*this.scale,n=s-40*this.scale,c=t.createLinearGradient(o,a,o+n,a+r);this.opts.isActive?(c.addColorStop(0,"rgba(34, 197, 94, 0.2)"),c.addColorStop(1,"rgba(34, 197, 94, 0.15)")):this.opts.isUnlocked?(c.addColorStop(0,"rgba(139, 92, 246, 0.2)"),c.addColorStop(1,"rgba(139, 92, 246, 0.15)")):(c.addColorStop(0,"rgba(60, 60, 70, 0.2)"),c.addColorStop(1,"rgba(50, 50, 60, 0.15)")),t.fillStyle=c,this.roundRect(t,o,a,n,r,12*this.scale),t.fill(),this.opts.isActive?t.strokeStyle="rgba(34, 197, 94, 0.6)":this.opts.isUnlocked?t.strokeStyle="rgba(139, 92, 246, 0.6)":t.strokeStyle="rgba(100, 100, 110, 0.4)",t.lineWidth=2*this.scale,this.roundRect(t,o,a,n,r,12*this.scale),t.stroke(),t.font="700 ".concat(24*this.scale,"px Inter, system-ui, Arial, sans-serif"),t.textAlign="center",t.textBaseline="middle",this.opts.isActive?(t.fillStyle="rgba(34, 197, 94, 0.95)",t.fillText("Active",o+n/2,a+r/2)):this.opts.isUnlocked?(t.fillStyle="rgba(168, 85, 247, 0.95)",t.fillText("BUY",o+n/2,a+r/2)):(t.fillStyle="rgba(160, 160, 170, 0.7)",t.fillText("Locked",o+n/2,a+r/2)),t.textAlign="left"}draw(t){this.time=t,this.drawCardShell(t),this.drawHeader(),this.drawSlots(),this.drawTonBar(),this.drawCycles(),this.drawStatusBar()}loop(t){this.draw(t),this.animationId=requestAnimationFrame(this.loop.bind(this))}destroy(){this.animationId&&cancelAnimationFrame(this.animationId)}constructor(t,e){var i,s,l,a,r,o,n,c,d;this.canvas=t,this.ctx=t.getContext("2d"),this.dpr=Math.max(1,window.devicePixelRatio||1),this.time=0;let h=null!==(i=e.width)&&void 0!==i?i:495;this.scale=h/495,this.opts={table:null!==(s=e.table)&&void 0!==s?s:1,ton:null!==(l=e.ton)&&void 0!==l?l:10,cyclesClosed:null!==(a=e.cyclesClosed)&&void 0!==a?a:12,slots:null!==(r=e.slots)&&void 0!==r?r:[null,null,null,null],width:h,height:null!==(o=e.height)&&void 0!==o?o:680,animate:null===(n=e.animate)||void 0===n||n,isActive:null===(c=e.isActive)||void 0===c||c,isUnlocked:null!==(d=e.isUnlocked)&&void 0!==d&&d,onBuy:e.onBuy,scale:this.scale},this.resize(this.opts.width,this.opts.height),this.opts.animate?(this.loop=this.loop.bind(this),this.animationId=requestAnimationFrame(this.loop)):this.draw(0)}}let g=r.map(t=>({nickname:null==t?void 0:t.nickname,filled:(null==t?void 0:t.filled)||!!(null==t?void 0:t.nickname)}));h.current=new f(d.current,{table:e,ton:i,cyclesClosed:a,slots:g,animate:!0,width:l,height:p,isActive:o,isUnlocked:n,onBuy:c});let x=new ResizeObserver(()=>{s()});x.observe(u.current);let b=t=>{var e,i,s,l;if(!d.current||!n||o||!c)return;let a=d.current.getBoundingClientRect(),r=(null===(i=h.current)||void 0===i?void 0:null===(e=i.opts)||void 0===e?void 0:e.width)||495,u=(null===(l=h.current)||void 0===l?void 0:null===(s=l.opts)||void 0===s?void 0:s.height)||560,p=r/495;t.clientX,a.left,a.width;let f=(t.clientY-a.top)/(a.height/u),g=u-50*p;f>=g&&f<=g+40*p&&c()},m=d.current;return m&&m.addEventListener("click",b),()=>{var t;x.disconnect(),m&&m.removeEventListener("click",b),null===(t=h.current)||void 0===t||t.destroy()}},[e,i,a,r,o,n,c]),(0,s.jsx)("div",{ref:u,className:"w-full",style:{margin:0,padding:0},children:(0,s.jsx)("canvas",{ref:d,className:"w-full h-auto",style:{cursor:n&&!o?"pointer":"default"}})})}var o=i(9763);let n=(0,o.Z)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),c=(0,o.Z)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);var d=i(2489),h=i(1804),u=i(6503),p=i(2845);function f(){let[t,e]=(0,l.useState)(!1),[i,a]=(0,l.useState)(!0),[r,o]=(0,l.useState)([]),[f]=(0,u.dG)(),g=(0,u.dD)();(0,l.useEffect)(()=>{let t=localStorage.getItem("matrix_ton_user_id")||"1";fetch("/api/user/tables?userId=".concat(t)).then(t=>t.json()).then(t=>{t.success&&o(t.tables)})},[]);let x=r.filter(t=>"ACTIVE"===t.status).length,b=r.reduce((t,e)=>t+(e.cycleNumber||0),0);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{position:"fixed",top:"12px",left:"12px",zIndex:99999,width:"56px",height:"56px"},children:(0,s.jsx)("button",{onClick:()=>{a(!i),document.documentElement.classList.toggle("light-theme")},style:{width:"56px",height:"56px",borderRadius:"50%",background:"rgba(139, 92, 246, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(139, 92, 246, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s"},children:i?(0,s.jsx)(n,{size:24,className:"text-purple-300"}):(0,s.jsx)(c,{size:24,className:"text-purple-300"})})}),(0,s.jsx)("div",{style:{position:"fixed",top:"12px",right:"12px",zIndex:99999,width:"56px",height:"56px"},children:(0,s.jsx)("button",{onClick:()=>e(!t),style:{width:"100%",height:"100%",borderRadius:"50%",background:"rgba(30, 30, 50, 0.3)",backdropFilter:"blur(10px)",border:"1px solid rgba(139, 92, 246, 0.5)",boxShadow:"0 8px 32px rgba(139, 92, 246, 0.3)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.3s"},children:t?(0,s.jsx)(d.Z,{size:24,className:"text-purple-300"}):(0,s.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"6px",alignItems:"center"},children:[0,1,2].map(t=>(0,s.jsx)("div",{style:{width:"28px",height:"3px",background:"rgba(168, 85, 247, 0.9)",borderRadius:"10px"}},t))})})}),t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.7)",zIndex:99998},onClick:()=>e(!1)}),(0,s.jsxs)("div",{style:{position:"fixed",top:0,right:0,height:"100%",width:"100%",zIndex:99999,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",overflowY:"auto",color:"#ffffff",paddingTop:"120px",lineHeight:"1.8"},className:"p-6 menu-text",children:[(0,s.jsx)(p.AnimatedBackground,{}),(0,s.jsxs)("div",{className:"flex flex-col h-full relative z-10",style:{paddingTop:"80px"},children:[(0,s.jsx)("button",{onClick:()=>e(!1),style:{position:"fixed",top:"12px",right:"12px",width:"56px",height:"56px",borderRadius:"50%",background:"rgba(139, 92, 246, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(139, 92, 246, 0.4)",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",zIndex:1e5},children:(0,s.jsx)(d.Z,{size:24,className:"text-purple-300"})}),(0,s.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,s.jsx)("div",{style:{fontSize:"1.2rem",color:"white",marginBottom:"12px",paddingBottom:"12px",borderBottom:"1px solid rgba(255,255,255,0.2)"},children:"Wallet"}),(0,s.jsxs)("button",{onClick:()=>f.openModal(),style:{display:"flex",alignItems:"center",gap:"10px",background:"transparent",color:"#a855f7",border:"1px solid rgba(168, 85, 247, 0.5)",borderRadius:"0.75rem",padding:"12px 20px",fontSize:"1rem",fontWeight:600,cursor:"pointer",width:"100%"},children:[(0,s.jsx)(h.Z,{size:20,style:{color:"#a855f7",flexShrink:0}}),g?"".concat(g.slice(0,6),"...").concat(g.slice(-4)):"Connect Wallet"]}),g&&(0,s.jsx)("button",{type:"button",onClick:()=>f.disconnect(),style:{background:"none",border:"none",padding:0,marginTop:"8px",fontSize:"0.8rem",color:"rgba(255,255,255,0.6)",cursor:"pointer",textDecoration:"underline"},children:"Disconnect"})]}),(0,s.jsxs)("div",{className:"flex flex-col mb-8",children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"1.2rem",color:"white",marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid rgba(255,255,255,0.2)"},children:[(0,s.jsx)("span",{children:"Active Tables"}),(0,s.jsxs)("span",{children:[x,"/12"]})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"1.2rem",color:"white",marginBottom:"16px",paddingBottom:"16px",borderBottom:"1px solid rgba(255,255,255,0.2)"},children:[(0,s.jsx)("span",{children:"Total Cycles"}),(0,s.jsx)("span",{children:b})]})]}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:[{label:"Tables",href:"/tables"},{label:"Referrals",href:"/referrals"}].map(t=>(0,s.jsx)("a",{href:t.href,className:"p-5 rounded-xl bg-white/5 hover:bg-white/10 transition-all",style:{fontSize:"1.2rem",color:"white",textDecoration:"none"},children:t.label},t.href))})]})]})]})]})}let g={1:10,2:20,3:40,4:80,5:160,6:320,7:640,8:1280,9:2560,10:5120,11:10240,12:20480};function x(){let t=(0,a.useRouter)(),[e,i]=(0,l.useState)([]),[o,n]=(0,l.useState)(!0),[c,d]=(0,l.useState)(0),[h,u]=(0,l.useState)(()=>localStorage.getItem("matrix_ton_user_id")),p=(0,l.useRef)(null);(0,l.useEffect)(()=>{{let e=localStorage.getItem("matrix_ton_user_id");e?u(e):t.replace("/register")}},[t]),(0,l.useEffect)(()=>(o&&(d(0),p.current=setInterval(()=>{d(t=>t>=95?(p.current&&(clearInterval(p.current),p.current=null),95):t+2)},50)),()=>{p.current&&(clearInterval(p.current),p.current=null)}),[o]),(0,l.useEffect)(()=>{h&&(async()=>{try{let t=await fetch("/api/user/tables?userId=".concat(h)),e=await t.json();e.success&&i(e.tables)}catch(t){console.error("Failed to fetch tables:",t)}finally{d(100),n(!1)}})()},[h]);let x=Array.from({length:12},(t,e)=>e+1),b=async()=>{if(h)try{let t=await fetch("/api/user/tables?userId=".concat(h)),e=await t.json();e.success&&i(e.tables)}catch(t){console.error("Failed to fetch tables:",t)}},m=async t=>{if(h)try{let e=await fetch("/api/user/tables/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:parseInt(h,10),tableNumber:t})});(await e.json()).success&&await b()}catch(t){console.error("Failed to buy table:",t)}};return(0,s.jsxs)("div",{className:"min-h-screen relative",children:[!o&&(0,s.jsx)(f,{}),(0,s.jsx)("div",{className:"w-full relative z-10",style:{paddingTop:"70px"},children:(0,s.jsx)("div",{className:"grid grid-cols-2 pt-[90px] mb-12",style:{display:"grid",gridTemplateColumns:"1fr 1fr",width:"fit-content",margin:"0 auto",gap:"0px"},children:o?(0,s.jsxs)("div",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",zIndex:99999,paddingTop:"0",backgroundColor:"transparent"},children:[(0,s.jsx)("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"white",marginBottom:"24px",textAlign:"center"},children:"Loading tables..."}),(0,s.jsxs)("p",{style:{fontSize:"1.5rem",color:"white",marginBottom:"16px",textAlign:"center"},children:[c,"%"]}),(0,s.jsx)("div",{style:{width:"250px",height:"8px",backgroundColor:"rgba(255,255,255,0.2)",borderRadius:"4px"},children:(0,s.jsx)("div",{style:{width:"".concat(c,"%"),height:"100%",backgroundColor:"#a855f7",borderRadius:"4px",transition:"width 0.1s"}})})]}):x.map(t=>{var i,l,a,o,n,c,d;let h=e.find(e=>e.tableNumber===t),u=!!h&&"ACTIVE"===h.status,p=null!==(i=g[t])&&void 0!==i?i:0,f=null!==(l=null==h?void 0:h.positions)&&void 0!==l?l:[],x=t=>{var e;return t?{nickname:null!==(e=t.partnerNickname)&&void 0!==e?e:t.nickname,filled:!0}:null},b=[x(null!==(a=f.find(t=>1===t.position))&&void 0!==a?a:null),x(null!==(o=f.find(t=>2===t.position))&&void 0!==o?o:null),x(null!==(n=f.find(t=>3===t.position))&&void 0!==n?n:null),x(null!==(c=f.find(t=>4===t.position))&&void 0!==c?c:null)],y=h?(null!==(d=h.cycleNumber)&&void 0!==d?d:1)-1:0,v=e.some(e=>e.tableNumber===t-1&&"ACTIVE"===e.status),w=1===t||v;return(0,s.jsx)("div",{style:{width:"44vw"},children:(0,s.jsx)(r,{tableNumber:t,price:p,cycles:y,slots:b,isActive:u,isUnlocked:w,onBuy:()=>m(t)})},t)})})})]})}},2845:function(t,e,i){"use strict";i.d(e,{AnimatedBackground:function(){return a}});var s=i(7437),l=i(2265);function a(){let t=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=t.current;if(!e)return;let i=e.getContext("2d");if(!i)return;e.width=window.innerWidth,e.height=window.innerHeight;let s=[];for(let t=0;t<100;t++)s.push({x:Math.random()*e.width,y:Math.random()*e.height,radius:2*Math.random(),vx:(Math.random()-.5)*.5,vy:(Math.random()-.5)*.5,opacity:Math.random()});!function t(){i&&e&&(i.fillStyle="rgba(26, 26, 46, 0.1)",i.fillRect(0,0,e.width,e.height),s.forEach(t=>{t.x+=t.vx,t.y+=t.vy,(t.x<0||t.x>e.width)&&(t.vx*=-1),(t.y<0||t.y>e.height)&&(t.vy*=-1),i.beginPath(),i.arc(t.x,t.y,t.radius,0,2*Math.PI),i.fillStyle="rgba(255, 255, 255, ".concat(t.opacity,")"),i.fill()}),requestAnimationFrame(t))}();let l=()=>{e.width=window.innerWidth,e.height=window.innerHeight};return window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),(0,s.jsx)("canvas",{ref:t,style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",zIndex:0,pointerEvents:"none"}})}},1804:function(t,e,i){"use strict";i.d(e,{Z:function(){return s}});let s=(0,i(9763).Z)("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]])},2489:function(t,e,i){"use strict";i.d(e,{Z:function(){return s}});let s=(0,i(9763).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(t,e,i){"use strict";var s=i(5475);i.o(s,"useRouter")&&i.d(e,{useRouter:function(){return s.useRouter}})}},function(t){t.O(0,[896,899,634,971,117,744],function(){return t(t.s=6573)}),_N_E=t.O()}]);